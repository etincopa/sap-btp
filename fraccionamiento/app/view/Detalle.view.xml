<mvc:View
	controllerName="mif.cp.fraccionamiento.controller.Detalle"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.m"
	xmlns:c="sap.ui.core"
	xmlns:t="sap.ui.table"
	xmlns:f="sap.f"
	displayBlock="true"
	height="100%"
	busyIndicatorDelay="0"
>
	<Page>
		<customHeader>
			<Toolbar>
				<content>
					<c:Fragment
						fragmentName="mif.cp.fraccionamiento.view.fragment.Header"
						type="XML"
					/>
				</content>
			</Toolbar>
		</customHeader>
		<footer>
			<OverflowToolbar>
				<ToolbarSpacer/>
				<Button
					tooltip="{i18n>atender}"
					enabled="{= ${localModel>/Online} === true &amp;&amp; ${localModel>/finalizado} === false}"
					visible="{=${localModel>/VerGestionGrupo}}"
					icon="sap-icon://accept"
					press="onAtenderPress"
					class="sapMBtnLarge btnAccion"
					type="Accept"
				/>
				<Button
					tooltip="{i18n>reimpresion}"
					icon="sap-icon://print"
					enabled="{= ${localModel>/Online} === true}"
					press="onReimpresionPress"
					class="sapMBtnLarge btnAccion"
				/>
				<Button
					tooltip="{i18n>editar}"
					enabled="{= ${localModel>/Online} === true &amp;&amp; ${localModel>/finalizado} === false}"
					visible="{=${localModel>/VerGestionGrupo}}"
					icon="sap-icon://request"
					press="onEditarPress"
					class="sapMBtnLarge btnAccion"
				/>
				<Button
					tooltip="{i18n>verBultos}"
					icon="sap-icon://product"
					press="onVerBultosPress"
					class="sapMBtnLarge btnAccion"
				/>
				<Button
					tooltip="{i18n>pesarBultoSaldo}"
					enabled="{= ${localModel>/Online} === true}"
					visible="{=${localModel>/VerGestionGrupo}}"
					icon="sap-icon://compare"
					press="onPesarBultoSaldoPress"
					class="sapMBtnLarge btnAccion"
				/>
				<Button
					tooltip="{i18n>actualizar}"
					enabled="{= ${localModel>/Online} === true &amp;&amp; ${localModel>/finalizado} === false}"
					icon="sap-icon://refresh"
					class="sapMBtnLarge btnAccion"
					press="onRefrescarDatos"
				/>
				<Button
					tooltip="{i18n>eliminar}"
					enabled="{= ${localModel>/Detalle_Eliminar} === true &amp;&amp; ${localModel>/finalizado} === false}"
					visible="{=${localModel>/VerGestionGrupo}}"
					icon="sap-icon://cancel"
					press="onEliminarPress"
					class="sapMBtnLarge btnAccion"
					type="Reject"
				/>
				<ToolbarSpacer/>
				<Button
					tooltip="{i18n>regresar}"
					icon="sap-icon://undo"
					press="onRegresarPress"
					class="sapMBtnLarge btnAccion"
				/>
			</OverflowToolbar>
		</footer>
		<t:Table
			id="tblFraccionamientos"
			rows="{
				path: 'localModel>/Detalle_Fraccionamientos'
			}"
			rowSelectionChange="onFraccionamientoRowSelected"
			selectionMode="Single"
			visibleRowCount="4"
			selectionBehavior="Row"
			ariaLabelledBy="title"
		>
			<t:extension>
				<OverflowToolbar>
					<MessageStrip
						text="{localModel>/Detalle_Consolidado/codigoInsumo} - {localModel>/Detalle_Consolidado/descripcion}"
						wrapping="true"
						class="contentInsumo message-strip-insumo"
					/>
					<ToolbarSpacer/>
					<Label text="{i18n>estado}:"/>
					<Select
						change="onEstadoChange"
						selectedKey="{localModel>/Detalle_Estado}"
						width="300px"
						items="{
							path: 'localModel>/Detalle_EstadosOrden',
							sorter: {
								path: 'contenido'
							}
						}"
					>
						<c:Item
							key="{localModel>iMaestraId}"
							text="{localModel>contenido}"
						/>
					</Select>
				</OverflowToolbar>
			</t:extension>
			<t:columns>
				<t:Column width="10rem">
					<Label text="{i18n>nroDoc}"/>
					<t:template>
						<Text
							text="{localModel>ordenNumero}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="9rem">
					<Label text="{i18n>requerido}"/>
					<t:template>
						<Text
							text="{
								path: 'localModel>requerido',
								formatter: '.formatter.peso'
							}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="9rem">
					<Label
						text="{i18n>potenciaTeor}"
						wrapping="true"
					/>
					<t:template>
						<Text
							text="{localModel>pTInsumo}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="10rem">
					<Label text="{i18n>nroLote}"/>
					<t:template>
						<Text
							text="{localModel>loteInsumo}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="9rem">
					<Label
						text="{i18n>potenciaPrac}"
						wrapping="true"
					/>
					<t:template>
						<Text
							text="{localModel>pPLoteLog}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="6rem">
					<Label text="Frac.OP"/>
					<t:template>
						<Text
							text="{localModel>numFraccion}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="8rem">
					<Label text="Frac.Com"/>
					<t:template>
						<Text
							text="{localModel>numSubFraccion}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="11rem">
					<Label text="Cant.Sug.Total"/>
					<t:template>
						<Text
							text="{
								path: 'localModel>totalCantSugerida',
								formatter: '.formatter.peso'
							}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="11rem">
					<Label text="Cant.Aten.Total"/>
					<t:template>
						<Text
							text="{
								path: 'localModel>totalCantAtendida',
								formatter: '.formatter.peso'
							}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="8rem">
					<Label text="{i18n>sugerido}"/>
					<t:template>
						<Text
							text="{
								path: 'localModel>cantSugerida',
								formatter: '.formatter.peso'
							}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="9rem">
					<Label text="{i18n>cantPedida}"/>
					<t:template>
						<Text
							text="{
								path: 'localModel>sugerido',
								formatter: '.formatter.peso'
							}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="8rem">
					<Label text="{i18n>enteros}"/>
					<t:template>
						<Text
							text="{
								path: 'localModel>entero',
								formatter: '.formatter.peso'
							}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="10rem">
					<Label text="{i18n>cantidadPesar}"/>
					<t:template>
						<Text
							text="{
								path: 'localModel>requeridoFinal',
								formatter: '.formatter.peso'
							}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="5rem">
					<Label text="{i18n>und}"/>
					<t:template>
						<Text
							text="{localModel>unidad}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="10rem">
					<Label text="{i18n>cantPesada}"/>
					<t:template>
						<Text
							text="{
								path: 'localModel>atendido',
								formatter: '.formatter.peso'
							}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="10rem">
					<Label text="{i18n>cantAtendida}"/>
					<t:template>
						<Text
							text="{
								parts: [{
									path: 'localModel>entero'
								}, {
									path: 'localModel>atendido'
								}],
								formatter: '.formatter.getSuma'
							}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="5rem">
					<Label text="{i18n>und}"/>
					<t:template>
						<Text
							text="{localModel>unidadOrigen}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="19rem">
					<Label text="{i18n>nomProducto}"/>
					<t:template>
						<Text
							text="{localModel>nombreProducto}"
							wrapping="true"
						/>
					</t:template>
				</t:Column>
				<t:Column width="10rem">
					<Label text="{i18n>lote}"/>
					<t:template>
						<Text
							text="{localModel>ordenLote}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="8rem">
					<Label text="Agotar"/>
					<t:template>
						<Text
							text="{= ${localModel>agotar} === 'X' ? 'SI' : 'NO'}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<t:Column width="10rem">
					<Label text="Pedido"/>
					<t:template>
						<Text
							text="{localModel>numPedido}"
							wrapping="false"
						/>
					</t:template>
				</t:Column>
				<!--<t:Column width="9rem">
                    <Label text="{i18n>accion}" />
                    <t:template>
                        <Button press="onCreateEtiquetaIFA"
                                visible="{=${localModel>pesadoMaterialPr} === 'X' ? true : false }" 
                                enabled="{
										parts: [{
											path: 'localModel>pesadoMaterialPr'
										}, {
											path: 'localModel>etiqueta'
										}],
										formatter: '.formatter.showEtiquetaIfa'
									}" 
                                tooltip= "Generar Etiqueta IFA" 
                                icon="sap-icon://tag" 
                                class="sapMBtnLarge"
                                text="IFA"/>
                    </t:template>
                </t:Column>-->
			</t:columns>
		</t:Table>
		<HBox class="sapUiTinyMargin">
			<VBox>
				<MessageStrip
					text="Control de Calidad
						{localModel>/ObsControl}"
					enableFormattedText="true"
					type="Information"
					showIcon="true"
					class="sapUiMediumMarginBottom message-strip-detalle message-strip-2"
				/>
			</VBox>
			<VBox>
				<HBox class="sapUiTinyMargin">
					<t:Table
						rows="{
							path: 'localModel>/Detalle_Bultos'
						}"
						id="tblBultos"
						class="sapUiTinyMarginBegin"
						width="30em"
						selectionMode="Single"
						visibleRowCount="1"
						height="30px"
						ariaLabelledBy="title"
					>
						<t:layoutData>
							<f:GridContainerItemLayoutData
								minRows="2"
								columns="1"
							/>
						</t:layoutData>
						<t:columns>
							<t:Column width="10rem">
								<Label text="{i18n>bulto}"/>
								<t:template>
									<Text
										
										text="{localModel>idBultoCust}"
										wrapping="false"
									/>
								</t:template>
							</t:Column>
							<t:Column width="10rem">
								<Label text="{i18n>nroLote}"/>
								<t:template>
									<Text
										text="{localModel>lote}"
										wrapping="false"
									/>
								</t:template>
							</t:Column>
							<t:Column width="10rem">
								<Label text="{i18n>peso}"/>
								<t:template>
									<Text
										text="{
											path: 'localModel>cantidadA',
											formatter: '.formatter.peso'
										}"
										wrapping="false"
									/>
								</t:template>
							</t:Column>
							<t:Column width="5rem">
								<Label text="Und."/>
								<t:template>
									<Text
										text="{localModel>unidadM}"
										wrapping="false"
									/>
								</t:template>
							</t:Column>
						</t:columns>
					</t:Table>
				</HBox>
				<HBox class="sapUiTinyMargin">
					<MessageStrip
						text="Glosa de Insumo
							{localModel>/GlosaInsumo}"
						enableFormattedText="true"
						type="Information"
						showIcon="true"
						class="sapUiTinyMarginBegin message-strip-detalle message-strip-detalle2 message-strip-3"
					/>
				</HBox>
			</VBox>
			<VBox>
				<MessageStrip
					text="Información de la Orden
						{localModel>/InfoOrden}"
					enableFormattedText="true"
					type="Information"
					showIcon="true"
					class="sapUiMediumMarginBottom message-strip-detalle message-strip-2"
				/>
			</VBox>
		</HBox>
	</Page>
</mvc:View>