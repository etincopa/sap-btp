<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:l="sap.ui.layout"
	xmlns:f="sap.ui.layout.form"
	xmlns:ui="sap.ui.table"
	xmlns:core="sap.ui.core"
	xmlns:custom="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
>
	<Dialog
		id="idDialogPedido"
		title="{i18n>tlTipoPedidos}: {PedidoModel>/valueTipoPedido}"
		contentWidth="100%"
		contentHeight="100%"
	>
		<content>
			<f:Form>
				<f:layout>
					<f:ResponsiveGridLayout
						labelSpanXL="4"
						labelSpanL="4"
						labelSpanM="12"
						labelSpanS="12"
						adjustLabelSpan="false"
						emptySpanXL="0"
						emptySpanL="0"
						emptySpanM="0"
						emptySpanS="0"
						columnsXL="2"
						columnsL="2"
						columnsM="2"
						singleContainerFullSize="false"
					/>
				</f:layout>
				<f:formContainers>
					<f:FormContainer>
						<f:formElements>
							<f:FormElement>
								<f:label>
									<Label
										text="{i18n>dclCentro}"
										required="true"
									/>
								</f:label>
								<f:fields>
									<ComboBox
										placeholder="{i18n>dclCentro}"
										selectedKey="{PedidoModel>/tipoPedidoParams/keyCentro}"
										items="{
											path: 'CentroSalaModel>/',
											sorter: [{
												path: 'Name1',
												descending: false
											}]
										}"
										change="onPedidoChangeCentro"
									>
										<core:Item
											key="{CentroSalaModel>Bwkey}"
											text="{CentroSalaModel>Name1}"
										/>
									</ComboBox>
								</f:fields>
							</f:FormElement>
						</f:formElements>
					</f:FormContainer>
					<f:FormContainer>
						<f:formElements>
							<f:FormElement>
								<f:label>
									<Label
										text="{i18n>dclSala}"
										required="true"
									/>
								</f:label>
								<f:fields>
									<ComboBox
										id="idPedidoSala"
										editable="false"
										placeholder="{i18n>dclSala}"
										selectedKey="{PedidoModel>/tipoPedidoParams/keySala}"
										value="{PedidoModel>/tipoPedidoParams/valueSala}"
										items="{
											path: '/SALA_PESAJE',
											filters: [{
												path: 'activo',
												operator: 'EQ',
												value1: 'true'
											}],
											sorter: [{
												path: 'sala',
												descending: false
											}]
										}"
										change="onSelectionChange"
									>
										<core:Item
											key="{salaPesajeId}"
											text="{sala}"
										/>
									</ComboBox>
								</f:fields>
							</f:FormElement>
						</f:formElements>
					</f:FormContainer>
					<f:FormContainer>
						<f:formElements>
							<f:FormElement>
								<f:label>
									<Label
										text="{i18n>dlblFechaOrden}"
										required="true"
									/>
								</f:label>
								<f:fields>
									<DateRangeSelection
										id="idDateFechaPedido"
										displayFormat="dd-MM-yyyy"
										placeholder="{i18n>dphlblFechaOrden}"
										value="{PedidoModel>/tipoPedidoParams/valueFechaInicio}"
									/>
								</f:fields>
							</f:FormElement>
						</f:formElements>
					</f:FormContainer>
					<f:FormContainer>
						<f:formElements>
							<f:FormElement>
								<f:label>
									<Label
										text="{i18n>lblOrdenProduccion}"
										required="true"
									/>
								</f:label>
								<f:fields>
									<Input
										value=""
										placeholder="{i18n>lblOrdenProduccion}"
										type="Text"
										showValueHelp="true"
										visible="true"
										width="100%"
										valueHelpOnly="true"
										valueHelpRequest=".onMatchCodeOrden"
									/>
								</f:fields>
							</f:FormElement>
						</f:formElements>
					</f:FormContainer>
				</f:formContainers>
			</f:Form>
			<ui:Table
				id="idOrdenItemsList"
				rows="{
					path: 'OrdenListModel>/'
				}"
				selectionMode="Single"
				visibleRowCount="5"
				enableSelectAll="false"
				rowSelectionChange="onSelectOrdenDisplayInsumo"
			>
				<ui:extension>
					<OverflowToolbar>
						<Title text="{i18n>tlOrdenesSelect}"/>
						<ToolbarSpacer/>
						<ToolbarSeparator/>
						<Button
							icon="sap-icon://delete"
							tooltip="Quitar"
							type="Reject"
							text="{i18n>btnQuitar}"
							press="onDeleteOrderSelected"
						/>
					</OverflowToolbar>
				</ui:extension>
				<ui:columns>
					<ui:Column
						width="7rem"
						hAlign="Center"
					>
						<Text text="{i18n>lblOrdenProduccion}"/>
						<ui:template>
							<Text
								text="{OrdenListModel>Aufnr}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="7rem"
						hAlign="Center"
					>
						<Text text="{i18n>clFraccion}"/>
						<ui:template>
							<Text
								text="{OrdenListModel>Fracc}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="7rem"
						hAlign="Center"
					>
						<Text text="{i18n>lblCodigoPt}"/>
						<ui:template>
							<Text
								text="{OrdenListModel>Plnbez}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="auto"
						hAlign="Center"
					>
						<Text text="{i18n>clDescPT}"/>
						<ui:template>
							<Text
								text="{OrdenListModel>Maktx}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="10rem"
						hAlign="Center"
					>
						<Text text="{i18n>dclLotePT}"/>
						<ui:template>
							<Text
								text="{OrdenListModel>Charg}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="7rem"
						hAlign="Center"
					>
						<Text text="{i18n>lblTamanoLote}"/>
						<ui:template>
							<Text
								text="{OrdenListModel>Bstfe}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="6rem"
						hAlign="Center"
					>
						<Text text="{i18n>dclClasOrdProd}"/>
						<ui:template>
							<Text
								text="{OrdenListModel>Auart}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="7rem"
						hAlign="Center"
					>
						<Text text="{i18n>dclFecVenProductTerm}"/>
						<ui:template>
							<Text
								text="{
									path: 'OrdenListModel>Vfdat',
									formatter: '.formatter.getTimestampToDMY'
								}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
				</ui:columns>
			</ui:Table>
			<ui:Table
				id="idTableInsumosCP"
				rows="{
					path: 'OrdenInsumoListModel>/',
					sorter: [{
						path: 'Aufnr',
						descending: false
					}, {
						path: 'Posnr',
						descending: false
					}, {
						path: 'Fracc',
						descending: false
					}, {
						path: 'Subfracc',
						descending: false
					}, {
						path: 'Matnr',
						descending: false
					}, {
						path: 'Charg2',
						descending: false
					}]
				}"
				selectionMode="None"
				visibleRowCount="7"
				enableSelectAll="false"
			>
				<ui:columns>
					<ui:Column
						width="7rem"
						hAlign="Center"
					>
						<Text text="{i18n>lblOrdenProduccion}"/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Aufnr}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="7rem"
						hAlign="Center"
					>
						<Text text="{i18n>clPosnr}"/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Posnr}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="7rem"
						hAlign="Center"
					>
						<Text text="{i18n>clFraccion}"/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Fracc}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="7rem"
						hAlign="Center"
					>
						<Text text="{i18n>clSubFraccion}"/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Subfracc}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="7rem"
						hAlign="Center"
					>
						<Text text="{i18n>lblCodigoInsumo}"/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Matnr}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="7rem"
						hAlign="Center"
					>
						<Text text="{i18n>lblLoteInsumo}"/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Charg2}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="12rem"
						hAlign="Center"
					>
						<Text text="{i18n>dclDescripMaterial}"/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Maktx}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="6rem"
						hAlign="End"
					>
						<Text
							text="{i18n>clCantReq}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Center"
							textDirection="Inherit"
						/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>CantReq}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="3rem"
						hAlign="Center"
					>
						<Text text="{i18n>clUnidad}"/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>UmReq}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="6rem"
						hAlign="End"
					>
						<Text
							text="{i18n>clPotenciaTeorica}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Center"
							textDirection="Inherit"
						/>
						<ui:template>
							<Text
								text="{
									path: 'OrdenInsumoListModel>Pteor',
									formatter: '.formatter.formatWeightString'
								}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="6rem"
						hAlign="Center"
					>
						<Text
							text="{i18n>clPotenciaPractica}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Center"
							textDirection="Inherit"
						/>
						<ui:template>
							<Text
								text="{
									path: 'OrdenInsumoListModel>Pprac',
									formatter: '.formatter.formatWeightString'
								}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="6rem"
						hAlign="End"
					>
						<Text
							text="{i18n>dclCantSugTotal}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Center"
							textDirection="Inherit"
						/>
						<ui:template>
							<Text
								text="{
									path: 'OrdenInsumoListModel>CantSfraccUmbTotal',
									formatter: '.formatter.formatWeight'
								}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="6rem"
						hAlign="End"
					>
						<Text
							text="{i18n>dclCantSug}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Center"
							textDirection="Inherit"
						/>
						<ui:template>
							<Input
								change="onChangeValue($event,${OrdenInsumoListModel>}, 'CANT_SUGERIDA')"
								value="{OrdenInsumoListModel>CantSfraccUmbEdit}"
								placeholder="{OrdenInsumoListModel>CantSugeridaColor}"
								type="Number"
								visible="true"
								textAlign="End"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="3rem"
						hAlign="Center"
					>
						<Text text="{i18n>clUnidad}"/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>UmbSfracc}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="12rem"
						hAlign="Center"
					>
						<Text
							text="{i18n>dclInsumoTexCalPot}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Center"
							textDirection="Inherit"
						/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Potx2Equiv}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="20rem"
						hAlign="Center"
					>
						<Text
							text="{i18n>dclInsumoIndOrdFab}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Center"
							textDirection="Inherit"
						/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Potx1}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="6rem"
						hAlign="End"
					>
						<Text
							text="{i18n>dclStockLibUtil}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Center"
							textDirection="Inherit"
						/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Clabs}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="6rem"
						hAlign="End"
					>
						<Text
							text="{i18n>dclCantComp}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Center"
							textDirection="Inherit"
						/>
						<ui:template>
							<Link
								text="{OrdenInsumoListModel>AvailQty1}"
								press="onOpenDialogOR($event,'Normal')"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="6rem"
						hAlign="End"
					>
						<Text text="{i18n>dclStockATP}"/>
						<ui:template>
							<Text
								text="{
									parts: [{
										path: 'OrdenInsumoListModel>Clabs'
									}, {
										path: 'OrdenInsumoListModel>AvailQty1'
									}],
									formatter: '.formatter.getResta'
								}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="5rem"
						hAlign="Center"
					>
						<Text text="{i18n>dclAgotar}"/>
						<ui:template>
							<Switch
								state="{OrdenInsumoListModel>Agotar}"
								customTextOff="No"
								customTextOn="Si"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="10rem"
						hAlign="Center"
					>
						<Text text="{i18n>dclGlosa}"/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Glos2}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="4rem"
						hAlign="Center"
					>
						<Text text="{i18n>dclCentro}"/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Werks}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
					<ui:Column
						width="4rem"
						hAlign="Center"
					>
						<Text text="{i18n>dclAlmacen}"/>
						<ui:template>
							<Text
								text="{OrdenInsumoListModel>Lgort}"
								wrapping="false"
							/>
						</ui:template>
					</ui:Column>
				</ui:columns>
			</ui:Table>
		</content>
		<beginButton/>
		<buttons>
			<Button
				text="{i18n>btnCrear}"
				type="Emphasized"
				iconFirst="true"
				width="auto"
				press="onCreatePA"
			/>
			<Button
				text="{i18n>btnCancelar}"
				type="Default"
				iconFirst="true"
				width="auto"
				press="onCloseDialog"
			/>
		</buttons>
		<customHeader/>
		<endButton/>
		<subHeader/>
	</Dialog>
</core:FragmentDefinition>