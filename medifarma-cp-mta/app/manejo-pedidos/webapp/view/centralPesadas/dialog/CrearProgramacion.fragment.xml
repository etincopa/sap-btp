<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:l="sap.ui.layout"
	xmlns:f="sap.ui.layout.form"
	xmlns:core="sap.ui.core"
	xmlns:custom="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
>
	<Dialog
		title="{i18n>tlCrearProgramacion}"
		contentWidth="100%"
	>
		<content>
			<f:SimpleForm
				editable="true"
				layout="ColumnLayout"
				labelSpanXL="4"
				labelSpanL="3"
				labelSpanM="4"
				labelSpanS="12"
				adjustLabelSpan="false"
				emptySpanXL="2"
				emptySpanL="2"
				emptySpanM="2"
				emptySpanS="0"
				columnsXL="2"
				columnsL="2"
				columnsM="2"
				singleContainerFullSize="false"
			>
				<f:content>
					<Label
						text="{i18n>dclCentro}"
						required="true"
					/>
					<ComboBox
						id="idCmbOrd"
						placeholder="{i18n>phdclCentro}"
						items="{
							path: 'CentroModel>/',
							sorter: [{
								path: 'Name1',
								descending: false
							}]
						}"
						custom:cmb="centro"
						custom:action="crear"
						valueState="{crearProgramacion>/valueStateCentro}"
						value="{crearProgramacion>/valueCentro}"
						selectedKey="{crearProgramacion>/keyCentro}"
						change="onAgregarProgramacionChangeCentro"
					>
						<core:Item
							key="{CentroModel>Bwkey}"
							text="{CentroModel>Name1}"
						/>
					</ComboBox>
					<Label
						text="{i18n>dclSala}"
						required="true"
					/>
					<ComboBox
						id="idCmbSala"
						enabled="false"
						placeholder="{i18n>dclSala}"
						value="{crearProgramacion>/valueSala}"
						selectedKey="{crearProgramacion>/keySala}"
						valueState="{crearProgramacion>/valueStateSala}"
						items="{
							path: '/SALA_PESAJE',
							parameters: {
								expand: 'oEstado,oPlanta'
							},
							filters: [{
								path: 'activo',
								operator: 'EQ',
								value1: 'true'
							}],
							sorter: [{
								path: 'sala',
								descending: false
							}]
						}"
						change="onChangeComboBox"
					>
						<core:Item
							key="{salaPesajeId}"
							text="{sala} - {oPlanta/contenido}"
						/>
					</ComboBox>
					<Label
						text="{i18n>dlblFecha}"
						required="true"
					/>
					<DatePicker
						placeholder="{i18n>dphlblRangoFec}"
						displayFormat="dd-MM-yyyy"
						valueState="{crearProgramacion>/valueStateFecha}"
						value="{crearProgramacion>/fecha}"
						valueFormat="yyyy-MM-dd"
						valueStateText=""
						change="handleChangeDatePicker"
					/>
					<Label
						text="{i18n>dlblFechaOrden}"
						required="true"
					/>
					<DateRangeSelection
						id="idDateFechaOrden"
						placeholder="{i18n>dphlblFecha}"
						displayFormat="dd-MM-yyyy"
						value="{crearProgramacion>/fechaInicioOrden}"
						change="onChangeDateinicioAgregarProgramacion"
					/>
					<Label text=""/>
					<Button
						icon="sap-icon://eraser"
						width="10rem"
						type="Default"
						text="{i18n>btnLimpiar}"
						press="onPressLimpiarFormularioAgregar"
					/>
					<Button
						icon="sap-icon://add"
						text="Buscar"
						press=".onOpenOrdenSearch"
						class="sapUiSmallMarginBottom"
					>
						<customData>
							<core:CustomData
								key="multi"
								value="true"
							/>
							<core:CustomData
								key="draggable"
								value="true"
							/>
						</customData>
						<layoutData>
							<l:GridData span="XL2 L2 M3 S4"/>
						</layoutData>
					</Button>
				</f:content>
			</f:SimpleForm>
			<Table
				sticky="ColumnHeaders,HeaderToolbar"
				width="auto"
				growing="true"
				items="{
					path: 'crearProgramacion>/programacion',
					sorter: {
						path: 'Name'
					}
				}"
			>
				<headerToolbar>
					<OverflowToolbar>
						<Title
							text="{i18n>tlProductos}"
							level="H2"
						/>
						<ToolbarSpacer/>
					</OverflowToolbar>
				</headerToolbar>
				<columns>
					<Column
						width="6rem"
						hAlign="Center"
					>
						<Text
							text="{i18n>dclCentro}"
						/>
					</Column>
					<Column
						width="11rem"
						hAlign="Center"
						vAlign="Middle"
						minScreenWidth="Phone"
						demandPopin="true"
						popinDisplay="Inline"
						mergeDuplicates="false"
					>
						<Text
							text="{i18n>dclSala}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Begin"
							textDirection="Inherit"
						/>
					</Column>
					<Column
						width="15rem"
						hAlign="Center"
						vAlign="Middle"
						minScreenWidth="Phone"
						demandPopin="true"
						popinDisplay="Inline"
						mergeDuplicates="false"
					>
						<Text
							text="{i18n>clDescPT}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Begin"
							textDirection="Inherit"
						/>
					</Column>
					<Column
						width="7rem"
						hAlign="Center"
						vAlign="Middle"
						minScreenWidth="Phone"
						demandPopin="true"
						popinDisplay="Inline"
						mergeDuplicates="false"
					>
						<Text
							text="{i18n>lblOrdenProduccion}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Begin"
							textDirection="Inherit"
						/>
					</Column>
					<Column
						width="7rem"
						hAlign="Center"
						vAlign="Middle"
						minScreenWidth="Phone"
						demandPopin="true"
						popinDisplay="Inline"
						mergeDuplicates="false"
					>
						<Text
							text="{i18n>dclLotePT}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Begin"
							textDirection="Inherit"
						/>
					</Column>
					<Column
						width="6rem"
						hAlign="Center"
						vAlign="Middle"
						minScreenWidth="Phone"
						demandPopin="false"
						popinDisplay="Inline"
						mergeDuplicates="false"
					>
						<Text
							text="{i18n>dclFecha}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Begin"
							textDirection="Inherit"
						/>
					</Column>
					<Column
						width="7rem"
						hAlign="Center"
						vAlign="Middle"
						minScreenWidth="Phone"
						demandPopin="false"
						popinDisplay="Inline"
						mergeDuplicates="false"
					>
						<Text
							text="{i18n>clEstado}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Begin"
							textDirection="Inherit"
						/>
					</Column>
					<Column
						width="7rem"
						hAlign="Center"
						vAlign="Middle"
						minScreenWidth="Phone"
						demandPopin="false"
						popinDisplay="Inline"
						mergeDuplicates="false"
					>
						<Text
							text="{i18n>btnDelete}"
							width="auto"
							maxLines="2"
							wrapping="true"
							textAlign="Begin"
							textDirection="Inherit"
						/>
					</Column>
				</columns>
				<items>
					<ColumnListItem>
						<cells>
							<Text
								text="{crearProgramacion>valueCentro}"
								width="auto"
								maxLines="2"
								wrapping="true"
								textAlign="Begin"
								textDirection="Inherit"
							/>
							<Text
								text="{crearProgramacion>valueSala}"
								width="auto"
								maxLines="2"
								wrapping="true"
								textAlign="Begin"
								textDirection="Inherit"
							/>
							<ObjectIdentifier
								title="{crearProgramacion>valueProducto}"
								text="{crearProgramacion>keyProducto}"
							/>
							<ObjectIdentifier title="{crearProgramacion>orden}"/>
							<Text
								text="{crearProgramacion>lote}"
								width="auto"
								maxLines="2"
								wrapping="true"
								textAlign="Begin"
								textDirection="Inherit"
							/>
							<Text
								text="{crearProgramacion>fecha}"
								width="auto"
								maxLines="2"
								wrapping="true"
								textAlign="Begin"
								textDirection="Inherit"
							/>
							<ObjectStatus
								text="{
									path: 'crearProgramacion>estadoOrdenErp',
									formatter: '.formatter.ErpOrdenStatusText'
								}"
								state="{
									path: 'crearProgramacion>estadoOrdenErp',
									formatter: '.formatter.ErpOrdenStatusColor'
								}"
								icon="{
									path: 'crearProgramacion>estadoOrdenErp',
									formatter: '.formatter.ErpOrdenStatusIcon'
								}"
							/>
							<HBox>
								<Button
									icon="sap-icon://delete"
									text=""
									press="onPressEliminar"
									enabled="true"
								/>
								<Button
									icon="sap-icon://activity-items"
									type="Default"
									text="Material"
									press="onShowListMaterial"
								/>
							</HBox>
						</cells>
					</ColumnListItem>
				</items>
			</Table>
		</content>
		<beginButton/>
		<buttons>
			<Button
				text="{i18n>btnCrearProgramacion}"
				type="Emphasized"
				enabled="{= ${crearProgramacion>/programacion}.length > 0 ? true : false }"
				iconFirst="true"
				width="auto"
				press="onPressCrear"
			/>
			<Button
				text="{i18n>btnCancelar}"
				type="Default"
				iconFirst="true"
				width="auto"
				press="onPressClose"
			/>
		</buttons>
		<customHeader/>
		<endButton/>
		<subHeader/>
	</Dialog>
</core:FragmentDefinition>