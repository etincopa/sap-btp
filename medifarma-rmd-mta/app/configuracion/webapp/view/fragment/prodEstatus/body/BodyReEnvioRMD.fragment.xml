<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns:f="sap.ui.layout.form" xmlns:u="sap.ui.unified">
    <f:Form>
        <f:title>
            <core:Title text="Registro de Manufactura: [{localModel>/lineaReenvio/codigo}] - {localModel>/lineaReenvio/descripcion}" />
        </f:title>
        <f:layout>
            <f:ResponsiveGridLayout
                labelSpanXL="3"
                labelSpanL="3"
                labelSpanM="3"
                labelSpanS="12"
                adjustLabelSpan="true"
                emptySpanXL="4"
                emptySpanL="4"
                emptySpanM="4"
                emptySpanS="0"
                columnsXL="1"
                columnsL="1"
                columnsM="1"
                singleContainerFullSize="true" />
        </f:layout>
        <f:formContainers>
            <f:FormContainer>
                <f:formElements>
                    <f:FormElement label="Destinatarios">
                        <f:fields>
                            <MultiComboBox 
                                items="{
                                    path: 'localModel>/destinations',
                                    sorter: {
                                        path: 'localModel>rol',
                                        descending: false,
                                        group: true
                                    }
                                }"
                                selectedKeys="{localModel>/lineaReenvio/destinatarios}"
                                showSecondaryValues="true" required="true">
                                <core:ListItem key="{localModel>usuarioId}" text="{localModel>usuario} - {localModel>nombre}"/>
                            </MultiComboBox>
                        </f:fields>
                    </f:FormElement>
                    <f:FormElement label="Destinatarios adicionales">
                        <f:fields>
                            <MultiComboBox 
                                items="{
                                    path: 'localModel>/destinationsAditional',
                                    sorter: {
                                        path: 'localModel>rol',
                                        descending: false,
                                        group: true
                                    }
                                }"
                                selectedKeys="{localModel>/lineaReenvio/destinatariosAdicionales}"
                                showSecondaryValues="true" enabled="{=${localModel>/destinationsAditional}.length > 0 ? true : false}">
                                <core:ListItem key="{localModel>usuarioId}" text="{localModel>usuario} - {localModel>nombre}"/>
                            </MultiComboBox>
                        </f:fields>
                    </f:FormElement>
                    <f:FormElement label="Mensaje Documentación Técnica">
                        <f:fields>
                            <Input required="true" value="{localModel>/lineaReenvio/mensajeDT}" placeholder="Ingrese mensaje" maxLength="1000" rows="5"/>
                        </f:fields>
                    </f:FormElement>
                    <f:FormElement label="Archivos Adjuntos">
                        <f:fields>
                            <Table items="{localModel>/lineaReenvio/adjuntos}">
                                <headerToolbar>
                                    <OverflowToolbar>
                                        <content>
                                            <ToolbarSpacer />
                                            <u:FileUploader id="fuReEnvioRMD" tooltip="Seleccione archivo adjunto" uploadOnChange="true" change="handleUploadCompleteReEnvio" icon="sap-icon://upload" iconOnly="true" buttonOnly="true"/>
                                        </content>
                                    </OverflowToolbar>
                                </headerToolbar>
                                <columns>
                                    <Column width="3em">
                                        <Text text="" />
                                    </Column>
                                    <Column>
                                        <Text text="Nombre" />
                                    </Column>
                                    <!-- <Column hAlign="End">
                                        <Text text=""/>
                                    </Column> -->
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <core:Icon src="sap-icon://pdf-attachment"/>
                                            <Text text="{localModel>Name}"/>
                                            <!-- <Button icon="sap-icon://decline" type="Transparent" press="onEliminarAdjuntoReenvio" tooltip="Eliminar"/> -->
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </f:fields>
                    </f:FormElement>
                </f:formElements>
            </f:FormContainer>
        </f:formContainers>
    </f:Form> 
</core:FragmentDefinition>