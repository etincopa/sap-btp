<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns:f="sap.ui.layout.form" xmlns:u="sap.ui.unified">
	<!-- <ScrollContainer width="100%" height="80%" horizontal="true" vertical="true" focusable="true"> -->
		<VBox class="sapUiSmallMargin">
            <f:Form>
                <f:title>
                    <core:Title text="Registro de Manufactura: [{localModel>/lineaSeleccionadaWF/codigo}] - {localModel>/lineaSeleccionadaWF/descripcion}" />
                </f:title>
                <f:layout>
                    <!-- <form:ResponsiveGridLayout adjustLabelSpan="false" columnsL="2" labelSpanL="3" columnsM="1" labelSpanM="2" labelSpanS="12"/> -->

                    <f:ResponsiveGridLayout
                        labelSpanL="3"
                        labelSpanM="2"
                        labelSpanS="12"
                        adjustLabelSpan="false"
                        columnsM="1"
                        singleContainerFullSize="false" />
                </f:layout>
                <f:formContainers>
                    <f:FormContainer>
                        <f:formElements>
                            <f:FormElement label="Destinatarios">
                                <f:fields>
                                    <MultiComboBox 
                                        items="{
                                            path: 'localModel>/destinations',
                                            sorter: {
                                                path: 'localModel>rol',
                                                descending: false,
                                                group: true
                                            }
                                        }"
                                        placeholder="Seleccione Destinatarios" selectedKeys="{localModel>/lineaSeleccionadaWF/destinatarios}"
                                        showSecondaryValues="true" required="true">
                                        <core:ListItem key="{localModel>usuarioId}" text="{localModel>usuario} - {localModel>nombre}"/>
                                    </MultiComboBox>
                                </f:fields>
                            </f:FormElement>
                            <f:FormElement label="Destinatarios adicionales">
                                <f:fields>
                                    <MultiComboBox 
                                        items="{
                                            path: 'localModel>/destinationsAditional',
                                            sorter: {
                                                path: 'localModel>rol',
                                                descending: false,
                                                group: true
                                            }
                                        }"
                                        placeholder="Seleccione Destinatarios Adicionales" selectedKeys="{localModel>/lineaSeleccionadaWF/destinatariosAdicionales}"
                                        showSecondaryValues="true" enabled="{=${localModel>/destinationsAditional}.length > 0 ? true : false}">
                                        <core:ListItem key="{localModel>usuarioId}" text="{localModel>usuario} - {localModel>nombre}"/>
                                    </MultiComboBox>
                                </f:fields>
                            </f:FormElement>
                            <f:FormElement label="Mensaje Documentación Técnica">
                                <f:fields>
                                       <!-- <Input required="true" value="{localModel>/lineaSeleccionadaWF/mensajeDT}" placeholder="Ingrese mensaje"/> -->
                                 <TextArea required="true" value="{localModel>/lineaSeleccionadaWF/mensajeDT}" placeholder="Ingrese mensaje" maxLength="1000" rows="5"/>
                                </f:fields>
                            </f:FormElement>
                            <!-- <f:FormElement>
                                <f:label>
                                    <Label text="Archivos Adjuntos" required = "true"/>
                                </f:label>
                                <f:fields>
                                    <u:FileUploader id="fuEnvioRMD" width="100%" uploadUrl="upload2/" tooltip="Seleccione archivo adjunto" change="handleUploadComplete" fileType="pdf" buttonText="{i18n>lblUpload}" placeholder="Seleccione archivo adjunto"/>
                                </f:fields>
                            </f:FormElement> -->
                              <f:FormElement visible="{version>/state}">
                                <f:label>
                                <Label text="{i18n>lblAdjunt}" vAlign="Middle" design="Bold" width="100%"/>
                                </f:label>
                                <f:fields>
                                    <Table items="{localModel>/lineaSeleccionadaWF/adjuntos}">
                                        <headerToolbar>
                                            <OverflowToolbar>
                                                <content>
                                                    <ToolbarSpacer />
                                                    <u:FileUploader id="fuEnvioRMD" tooltip="{i18n>tltpAdjunt}" uploadOnChange="true" change="handleUploadComplete" icon="sap-icon://upload" iconOnly="true" buttonOnly="true" 
                                                    multiple="true"/>
                                                </content>
                                            </OverflowToolbar>
                                        </headerToolbar>
                                        <columns>
                                            <Column
                                                width="3em">
                                                <Text text="" />
                                            </Column>
                                            <Column>
                                                <Text text="Nombre" />
                                            </Column>
                                            <!-- <Column hAlign="End">
                                                <Text text=""/>
                                            </Column> -->
                                        </columns>
                                        <items>
                                            <ColumnListItem>
                                                <cells>
                                                    <core:Icon src="sap-icon://pdf-attachment"/>
                                                    <Text text="{localModel>Name}"/>
                                                    <!-- <Button icon="sap-icon://decline" type="Transparent" press="onEliminarVersionAdjunto"/> -->
                                                </cells>
                                            </ColumnListItem>
                                        </items>
                                    </Table>
                                </f:fields>
                            </f:FormElement>
                        </f:formElements>
                    </f:FormContainer>
                </f:formContainers>
            </f:Form>
        </VBox>    
	<!-- </ScrollContainer> -->
</core:FragmentDefinition>